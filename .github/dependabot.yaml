# Please see the documentation for all configuration options:
# https://docs.github.com/github/administering-a-repository/configuration-options-for-dependency-updates

version: 2

# Shared config using YAML anchors
x-npm-defaults: &npm-defaults
  package-ecosystem: npm
  registries:
    - npm-github
  schedule:
    interval: daily
  cooldown:
    default-days: 7
  versioning-strategy: increase

updates:
  - package-ecosystem: github-actions
    directory: /
    schedule:
      interval: weekly

  - <<: *npm-defaults
    directory: /
    groups:
      react:
        patterns:
          - 'react'
          - 'react-dom'
          - '@types/react'
          - '@types/react-dom'
      vitest:
        patterns:
          - 'vitest'
          - '@vitest/*'
      eslint:
        patterns:
          - 'eslint'
          - '@eslint/*'
          - 'typescript-eslint'
          - 'eslint-plugin-*'
      prettier:
        patterns:
          - 'prettier'
          - '@trivago/prettier-plugin-sort-imports'
      playwright:
        patterns:
          - '@playwright/*'
      vite:
        patterns:
          - 'vite'
          - '@vitejs/*'

  - <<: *npm-defaults
    directory: /apps/intern
    groups:
      vite:
        patterns:
          - 'vite'
          - '@vitejs/*'

  - <<: *npm-defaults
    directory: /packages/api

registries:
  npm-github:
    type: npm-registry
    url: https://npm.pkg.github.com
    token: ${{ secrets.READER_TOKEN }}
    replaces-base: true
